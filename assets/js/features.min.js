class YannovaQuoteGenerator {constructor() {this.currentStep = 1;this.totalSteps = 6;this.quoteData = {contact:{},project:{},preferences:{},measurements:{},timeline:{} };this.elements = {};this.init()} init() {this.cacheElements();this.bindEvents();this.loadSavedData();this.updateStep()} cacheElements() {this.elements = {modal:document.getElementById('quote-modal-container'),closeBtn:document.getElementById('quote-close'),prevBtn:document.getElementById('quote-prev'),nextBtn:document.getElementById('quote-next'),submitBtn:document.getElementById('quote-submit'),progressFill:document.getElementById('progress-fill'),progressText:document.getElementById('progress-text'),summaryList:document.getElementById('summary-list'),steps:document.querySelectorAll('.quote-step'),projectTypes:document.querySelectorAll('.project-type'),formInputs:document.querySelectorAll('#quote-modal-container input,#quote-modal-container select,#quote-modal-container textarea') }} bindEvents() {document.addEventListener('click',(e) => {if (e.target.matches('.btn-primary[href="#contact"],.quote-btn')) {e.preventDefault();this.openModal()} });this.elements.closeBtn.addEventListener('click',() => this.closeModal());document.addEventListener('keydown',(e) => {if (e.key === 'Escape' && this.elements.modal.classList.contains('open')) {this.closeModal()} });this.elements.nextBtn.addEventListener('click',() => this.nextStep());this.elements.prevBtn.addEventListener('click',() => this.prevStep());this.elements.submitBtn.addEventListener('click',() => this.submitQuote());this.elements.projectTypes.forEach(type => {type.addEventListener('click',() => this.selectProjectType(type))});this.elements.formInputs.forEach(input => {input.addEventListener('input',() => this.handleInputChange(input));input.addEventListener('change',() => this.handleInputChange(input));input.addEventListener('blur',() => this.validateField(input))});this.elements.modal.addEventListener('click',(e) => {if (e.target === this.elements.modal) {this.closeModal()} })} openModal() {this.elements.modal.classList.add('open');this.elements.modal.setAttribute('aria-hidden','false');document.body.style.overflow = 'hidden';const firstInput = this.elements.modal.querySelector('input[required]');if (firstInput) {setTimeout(() => firstInput.focus(),100)} this.trackEvent('quote_modal_opened')} closeModal() {this.elements.modal.classList.remove('open');this.elements.modal.setAttribute('aria-hidden','true');document.body.style.overflow = '';this.trackEvent('quote_modal_closed')} nextStep() {if (this.validateCurrentStep()) {if (this.currentStep < this.totalSteps) {this.animateStepTransition(() => {this.currentStep++;this.updateStep()})} } } prevStep() {if (this.currentStep > 1) {this.animateStepTransition(() => {this.currentStep--;this.updateStep()})} } animateStepTransition(callback) {const currentStepEl = document.getElementById(`step-${this.currentStep}`);currentStepEl.classList.add('exiting');setTimeout(() => {callback();currentStepEl.classList.remove('exiting')},200)} updateStep() {this.elements.steps.forEach(step => {step.classList.remove('active')});const currentStepEl = document.getElementById(`step-${this.currentStep}`);if (currentStepEl) {currentStepEl.classList.add('active')} const progress = (this.currentStep / this.totalSteps) * 100;this.elements.progressFill.style.width = `${progress}%`;this.elements.progressText.textContent = `Stap ${this.currentStep} van ${this.totalSteps}`;this.elements.prevBtn.style.display = this.currentStep > 1 ? 'flex' :'none';if (this.currentStep === this.totalSteps) {this.elements.nextBtn.style.display = 'none';this.elements.submitBtn.style.display = 'flex';this.updateSummary()} else {this.elements.nextBtn.style.display = 'flex';this.elements.submitBtn.style.display = 'none'} const firstInput = currentStepEl?.querySelector('input,select,textarea');if (firstInput) {setTimeout(() => firstInput.focus(),100)} } selectProjectType(element) {element.classList.toggle('selected');const selectedTypes = Array.from(this.elements.projectTypes) .filter(type => type.classList.contains('selected')) .map(type => type.getAttribute('data-type'));this.quoteData.project.types = selectedTypes;this.saveData()} handleInputChange(input) {this.saveData();if (input.matches('#quote-email,#quote-phone')) {this.validateField(input)} } validateCurrentStep() {const currentStepEl = document.getElementById(`step-${this.currentStep}`);const requiredFields = currentStepEl.querySelectorAll('[required]');this.clearErrors();let isValid = true;for (const field of requiredFields) {if (!this.validateField(field)) {isValid = false} } if (this.currentStep === 2) {if (!this.quoteData.project.types || this.quoteData.project.types.length === 0) {this.showError('Selecteer minimaal Ã©Ã©n project type');isValid = false} } if (this.currentStep === 6) {if (!document.getElementById('quote-terms').checked) {this.showError('U moet akkoord gaan met de privacyvoorwaarden');isValid = false} } return isValid} validateField(field) {const value = field.value.trim();const fieldLabel = field.previousElementSibling?.textContent || field.getAttribute('placeholder') || 'Dit veld';this.clearFieldError(field);field.classList.remove('error');if (!value) {if (field.hasAttribute('required')) {this.showFieldError(field,`${fieldLabel} is verplicht`);return false} return true} if (field.type === 'email' && !this.isValidEmail(value)) {this.showFieldError(field,'Voer een geldig e-mailadres in');return false} if (field.type === 'tel' && !this.isValidPhone(value)) {this.showFieldError(field,'Voer een geldig telefoonnummer in');return false} return true} isValidEmail(email) {const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;return emailRegex.test(email)} isValidPhone(phone) {const phoneRegex = /^[\+]?[0-9\s\-\(\)]{10,}$/;return phoneRegex.test(phone)} showFieldError(field,message) {field.classList.add('error');const errorDiv = document.createElement('div');errorDiv.className = 'field-error';errorDiv.textContent = message;field.parentNode.insertBefore(errorDiv,field.nextSibling)} clearFieldError(field) {const existingError = field.parentNode.querySelector('.field-error');if (existingError) {existingError.remove()} } clearErrors() {document.querySelectorAll('.field-error').forEach(error => error.remove());document.querySelectorAll('.error').forEach(field => field.classList.remove('error'));const errorBanner = document.querySelector('.error-banner');if (errorBanner) {errorBanner.remove()} } showError(message) {this.clearErrors();const errorDiv = document.createElement('div');errorDiv.className = 'error-banner';errorDiv.textContent = message;const stepsContainer = document.querySelector('.quote-steps');stepsContainer.insertBefore(errorDiv,stepsContainer.firstChild);setTimeout(() => errorDiv.remove(),5000)} saveData() {this.quoteData.contact = {name:document.getElementById('quote-name')?.value || '',email:document.getElementById('quote-email')?.value || '',phone:document.getElementById('quote-phone')?.value || '',address:document.getElementById('quote-address')?.value || '' };this.quoteData.preferences = {material:document.querySelector('input[name="material"]:checked')?.value || '',color:document.getElementById('quote-color')?.value || '' };this.quoteData.measurements = {notes:document.getElementById('quote-notes')?.value || '' };this.quoteData.timeline = {preferred:document.querySelector('input[name="timeline"]:checked')?.value || '',date:document.getElementById('quote-preferred-date')?.value || '',terms:document.getElementById('quote-terms')?.checked || false };localStorage.setItem('yannova_quote_data',JSON.stringify(this.quoteData))} loadSavedData() {try {const saved = localStorage.getItem('yannova_quote_data');if (saved) {this.quoteData = JSON.parse(saved);this.populateForm()} } catch (error) {} } populateForm() {if (this.quoteData.contact) {Object.keys(this.quoteData.contact).forEach(key => {const field = document.getElementById(`quote-${key}`);if (field) field.value = this.quoteData.contact[key] || ''})} if (this.quoteData.project.types) {this.quoteData.project.types.forEach(type => {const element = document.querySelector(`[data-type="${type}"]`);if (element) element.classList.add('selected')})} if (this.quoteData.preferences) {if (this.quoteData.preferences.material) {const materialInput = document.querySelector(`input[name="material"][value="${this.quoteData.preferences.material}"]`);if (materialInput) materialInput.checked = true} if (this.quoteData.preferences.color) {const colorField = document.getElementById('quote-color');if (colorField) colorField.value = this.quoteData.preferences.color} } if (this.quoteData.measurements) {const notesField = document.getElementById('quote-notes');if (notesField) notesField.value = this.quoteData.measurements.notes || ''} if (this.quoteData.timeline) {if (this.quoteData.timeline.preferred) {const timelineInput = document.querySelector(`input[name="timeline"][value="${this.quoteData.timeline.preferred}"]`);if (timelineInput) timelineInput.checked = true} if (this.quoteData.timeline.date) {const dateField = document.getElementById('quote-preferred-date');if (dateField) dateField.value = this.quoteData.timeline.date} if (this.quoteData.timeline.terms) {const termsField = document.getElementById('quote-terms');if (termsField) termsField.checked = true} } } updateSummary() {const summaryItems = [ {label:'Naam',value:this.quoteData.contact.name },{label:'E-mail',value:this.quoteData.contact.email },{label:'Telefoon',value:this.quoteData.contact.phone },{label:'Adres',value:this.quoteData.contact.address || 'Niet opgegeven' },{label:'Project type(s)',value:this.quoteData.project.types?.join(',') || 'Niet geselecteerd' },{label:'Materiaal voorkeur',value:this.quoteData.preferences.material || 'Geen voorkeur' },{label:'Kleur',value:this.quoteData.preferences.color || 'Niet opgegeven' },{label:'Project beschrijving',value:this.quoteData.measurements.notes || 'Niet opgegeven' },{label:'Timeline',value:this.quoteData.timeline.preferred || 'Niet geselecteerd' },{label:'Voorkeursdatum',value:this.quoteData.timeline.date || 'Niet opgegeven' } ];this.elements.summaryList.innerHTML = summaryItems .filter(item => item.value && item.value !== 'Niet opgegeven' && item.value !== 'Niet geselecteerd') .map(item => ` <li> <span class="summary-label">${item.label}:</span> <span class="summary-value">${item.value}</span> </li> `).join('')} async submitQuote() {if (!this.validateCurrentStep()) return;this.saveData();const submitBtn = this.elements.submitBtn;const originalText = submitBtn.innerHTML;submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Versturen...';submitBtn.disabled = true;try {const response = await fetch('/api/quotes',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({...this.quoteData,timestamp:new Date().toISOString(),source:'website' }) });const data = await response.json();if (data.success) {this.showSuccess('Uw offerte aanvraag is succesvol verstuurd! We nemen zo snel mogelijk contact met u op.');this.closeModal();this.resetForm();this.trackEvent('quote_submitted',{project_types:this.quoteData.project.types,material:this.quoteData.preferences.material })} else {throw new Error(data.error || 'Er is een fout opgetreden')} } catch (error) {console.error('Quote submission error:',error);this.showError('Er is een fout opgetreden bij het versturen van uw aanvraag. Probeer het later opnieuw.')} finally {submitBtn.innerHTML = originalText;submitBtn.disabled = false} } resetForm() {this.currentStep = 1;this.quoteData = {contact:{},project:{},preferences:{},measurements:{},timeline:{} };this.elements.formInputs.forEach(field => {if (field.type === 'checkbox') {field.checked = false} else {field.value = ''} });this.elements.projectTypes.forEach(type => {type.classList.remove('selected')});localStorage.removeItem('yannova_quote_data');this.updateStep()} showSuccess(message) {const successDiv = document.createElement('div');successDiv.className = 'quote-success';successDiv.innerHTML = ` <i class="fas fa-check-circle"></i> <div>${message}</div> `;document.body.appendChild(successDiv);setTimeout(() => {successDiv.remove()},5000)} trackEvent(eventName,data = {}) {if (window.yannovaAnalytics) {window.yannovaAnalytics.trackCustomEvent(eventName,data)} if (typeof gtag !== 'undefined') {gtag('event',eventName,{event_category:'quote_generator',...data })} } } document.addEventListener('DOMContentLoaded',() => {window.yannovaQuoteGenerator = new YannovaQuoteGenerator()});if (typeof module !== 'undefined' && module.exports) {module.exports = YannovaQuoteGenerator} class YannovaQuoteProcessor {constructor() {this.scenarios = {'raamvervanging':this.getRaamvervangingPrompt(),'gevelrenovatie':this.getGevelrenovatiePrompt(),'schuifpui':this.getSchuifpuiPrompt(),'dakramen':this.getDakramenPrompt(),'nieuwbouw':this.getNieuwbouwPrompt() };this.init()} init() {this.setupEventListeners()} setupEventListeners() {document.addEventListener('quoteRequest',(e) => {this.processQuoteRequest(e.detail)})} async processQuoteRequest(voiceInput) {try {const scenario = this.detectScenario(voiceInput);const extractedData = this.extractDataFromVoice(voiceInput);const aiPrompt = this.generateAIPrompt(scenario,extractedData);const quote = await this.sendToAI(aiPrompt);const formattedQuote = this.formatQuoteResponse(quote);this.deliverQuote(formattedQuote)} catch (error) {console.error('Quote processing error:',error);this.handleError(error)} } detectScenario(voiceInput) {const input = voiceInput.toLowerCase();if (input.includes('dakkapel') || input.includes('dakraam')) {return 'dakramen'} else if (input.includes('schuifpui') || input.includes('schuifdeur')) {return 'schuifpui'} else if (input.includes('nieuwbouw') || input.includes('nieuwe woning')) {return 'nieuwbouw'} else if (input.includes('alle ramen') || input.includes('gevel') || input.includes('rijtjeshuis')) {return 'gevelrenovatie'} else {return 'raamvervanging'} } extractDataFromVoice(voiceInput) {const data = {naam:this.extractName(voiceInput),afmetingen:this.extractDimensions(voiceInput),materiaal:this.extractMaterial(voiceInput),glasType:this.extractGlassType(voiceInput),kleur:this.extractColor(voiceInput),extraWensen:this.extractExtraWishes(voiceInput),locatie:this.extractLocation(voiceInput) };return data} extractName(input) {const nameMatch = input.match(/(?:ik ben|mijn naam is|dit is)\s+([A-Z][a-z]+\s+[A-Z][a-z]+(?:\s+[A-Z][a-z]+)?)/i);return nameMatch ? nameMatch[1] :'Onbekend'} extractDimensions(input) {const dimensions = [];const dimPattern = /(\d+)\s*(?:bij|x|Ã—)\s*(\d+)\s*(?:cm|centimeter|meter)/gi;let match;while ((match = dimPattern.exec(input)) !== null) {dimensions.push({breedte:parseInt(match[1]),hoogte:parseInt(match[2]),eenheid:match[0].includes('meter') ? 'meter' :'cm' })} return dimensions} extractMaterial(input) {if (input.includes('kunststof') || input.includes('pvc')) return 'kunststof';if (input.includes('aluminium')) return 'aluminium';if (input.includes('hout') || input.includes('houten')) return 'hout';return 'geen voorkeur'} extractGlassType(input) {if (input.includes('triple') || input.includes('hr+++')) return 'HR+++ triple glas';if (input.includes('dubbel') || input.includes('hr++')) return 'HR++ dubbel glas';if (input.includes('hr+')) return 'HR+ glas';return 'HR++ dubbel glas'} extractColor(input) {if (input.includes('wit')) return 'wit';if (input.includes('zwart')) return 'zwart';if (input.includes('grijs') || input.includes('antraciet')) return 'grijs';if (input.includes('bruin')) return 'bruin';return 'wit'} extractExtraWishes(input) {const wishes = [];if (input.includes('zonwering')) wishes.push('zonwering');if (input.includes('screen') || input.includes('horren')) wishes.push('screens');if (input.includes('elektrisch')) wishes.push('elektrische bediening');if (input.includes('inbraakwerend')) wishes.push('inbraakwerend');return wishes} extractLocation(input) {if (input.includes('woonkamer')) return 'woonkamer';if (input.includes('slaapkamer')) return 'slaapkamer';if (input.includes('keuken')) return 'keuken';if (input.includes('voorkant')) return 'voorkant';if (input.includes('achterkant')) return 'achterkant';return 'niet gespecificeerd'} generateAIPrompt(scenario,extractedData) {const basePrompt = this.scenarios[scenario];let prompt = basePrompt.replace(/\[uit transcript halen\]/g,extractedData.naam);prompt = prompt.replace(/\[uit transcript\]/g,extractedData.afmetingen.length > 0 ? `${extractedData.afmetingen.length}x raam ${extractedData.afmetingen[0].breedte}x${extractedData.afmetingen[0].hoogte}cm` :'Afmetingen uit transcript');prompt += `\n\nEXTRACTED DATA FROM VOICE INPUT:\n`;prompt += `- Naam:${extractedData.naam}\n`;prompt += `- Afmetingen:${JSON.stringify(extractedData.afmetingen)}\n`;prompt += `- Materiaal voorkeur:${extractedData.materiaal}\n`;prompt += `- Glas type:${extractedData.glasType}\n`;prompt += `- Kleur:${extractedData.kleur}\n`;prompt += `- Extra wensen:${extractedData.extraWensen.join(',')}\n`;prompt += `- Locatie:${extractedData.locatie}\n`;return prompt} async sendToAI(prompt) {try {const response = await fetch('/api/ai/process-quote',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({prompt:prompt }) });const data = await response.json();return data.quote} catch (error) {return this.generateLocalQuote(prompt)} } generateLocalQuote(prompt) {return {scenario:'raamvervanging',totalPrice:2500,breakdown:{materials:1800,labor:500,extras:200 },timeline:'4-6 weken',summary:'Offerte gegenereerd op basis van uw spraakinput' }} formatQuoteResponse(quote) {return {success:true,quote:quote,timestamp:new Date().toISOString(),formatted:this.formatForDisplay(quote) }} formatForDisplay(quote) {return ` ðŸŽ¯ OFFERTE OVERZICHT ðŸ’° Totaalprijs:â‚¬${quote.totalPrice?.toLocaleString() || 'Op aanvraag'} ðŸ“… Levertijd:${quote.timeline || '4-6 weken'} ðŸ“‹ Scenario:${quote.scenario || 'Standaard'} ${quote.summary || 'Offerte gegenereerd op basis van uw aanvraag'} ðŸ“ž Voor een definitieve offerte kunt u contact opnemen via:- Telefoon:+32 (0)477 28 10 28 - Email:info@yannova.nl `} deliverQuote(formattedQuote) {if (window.yannovaChatbot) {window.yannovaChatbot.addMessage({text:formattedQuote.formatted },'bot')} if (window.yannovaQuoteGenerator) {window.yannovaQuoteGenerator.openModal()} if (window.yannovaAnalytics) {window.yannovaAnalytics.trackQuoteGeneration({scenario:formattedQuote.quote.scenario,price:formattedQuote.quote.totalPrice,source:'voice_input' })} } handleError(error) {const errorMessage = ` âŒ Er is een fout opgetreden bij het verwerken van uw aanvraag. Probeer het opnieuw of neem contact op via:ðŸ“ž +32 (0)477 28 10 28 ðŸ“§ info@yannova.nl `;if (window.yannovaChatbot) {window.yannovaChatbot.addMessage({text:errorMessage },'bot')} } getRaamvervangingPrompt() {return `Je bent een expert in ramen en deuren voor woningen. Genereer een professionele offerte voor raamvervanging op basis van de volgende informatie:KLANTGEGEVENS:- Naam:[uit transcript halen] - Type woning:Standaard eengezinswoning - Locatie:[indien vermeld] SPECIFICATIES:- Aantal ramen:[uit transcript] - Afmetingen per raam:[B x H in cm] - Type glas:HR++ dubbel glas (U-waarde 1.2) - Kozijnmateriaal:Kunststof (wit) - Huidige situatie:Houten kozijnen - Beglazingstype:GeÃ¯soleerd dubbel glas - Hang:Draai-kiepraam (standaard) WERKZAAMHEDEN:1. Demontage oude ramen inclusief kozijnen 2. Afvoer oud materiaal 3. Voorbereiding metselwerk/stucwerk 4. Plaatsing nieuwe kunststof kozijnen 5. Plaatsing nieuwe ramen met HR++ glas 6. Afkitten en afwerken 7. Opruimen werkplek PRIJSBEREKENING:- Kunststof kozijn + HR++ raam (150x120cm):â‚¬450-550 per stuk - Plaatsingskosten per raam:â‚¬150-200 - Demontage oude raam:â‚¬75-100 per stuk - Afvoerkosten:â‚¬50 (totaal) - Stucwerk/afwerking:â‚¬100-150 per raam - BTW:21% EXTRA INFORMATIE:- Levertijd:4-6 weken - Garantie:10 jaar op kozijn,5 jaar op glas - Certificering:KOMO-keur,CE-markering - Energielabel:A++ (door HR++ glas) GENEREER OFFERTE IN JSON FORMAAT.`} getGevelrenovatiePrompt() {return `COMPLETE GEVELRENOVATIE OFFERTE PROJECTTYPE:Totaalrenovatie ramen + voordeur rijtjeshuis URGENTIE:Normaal (4-8 weken levertijd) RAAM INVENTARISATIE:Begane grond:- 3x raam 100x120cm - HR+++ triple glas - Draai-kiepraam - Aluminium antraciet - Inclusief:Elektrische zonwering buitenzijde (3 stuks) Verdieping 1:- 4x raam 80x100cm - HR+++ triple glas - Draai-kiepraam - Aluminium antraciet Dakramen:- 2x dakraam 60x80cm - HR+++ triple glas - Elektrisch bedienbaar - Velux/Roto kwaliteit VOORDEUR:- Afmetingen:90x210cm - Materiaal:Aluminium antraciet met houtnerf structuur - Type:Veiligheidsdeur RC2 (inbraakwerend) - Beglazing:Gedeeltelijk mat glas (privacy) - Hang:Rechtsdraaiend (standaard) - Slot:3-punts sluiting met cilinder - Extra:Deurautomaat + nachtslot WERKZAAMHEDEN:1. Opname ter plaatse (verplicht bij totaalproject) 2. Demontage alle oude ramen + voordeur 3. Afvoer oud materiaal en glas (gescheiden) 4. Herstel/aanpassing metselwerk waar nodig 5. Plaatsing nieuwe aluminium kozijnen (15 stuks totaal) 6. Plaatsing nieuwe ramen met HR+++ glas 7. Plaatsing voordeur met beslag 8. Montage zonwering (3 stuks) + elektrische aansluiting 9. Installatie dakramen incl. loodslabben 10. Kitten,stucen en afwerken binnen/buiten 11. Eindschoonmaak PRIJSOPBOUW:MATERIALEN:- Aluminium ramen 100x120cm HR+++ (3x):â‚¬750/stuk = â‚¬2.250 - Aluminium ramen 80x100cm HR+++ (4x):â‚¬550/stuk = â‚¬2.200 - Dakramen elektrisch 60x80cm (2x):â‚¬950/stuk = â‚¬1.900 - Aluminium voordeur RC2 90x210cm:â‚¬2.800 - Elektrische zonwering (3x):â‚¬450/stuk = â‚¬1.350 - Beslag,toebehoren,kitranden:â‚¬400 ARBEID:- Demontage (9 ramen + deur):1 dag = â‚¬600 - Plaatsing ramen:2 dagen = â‚¬1.200 - Plaatsing voordeur:0.5 dag = â‚¬300 - Dakramen plaatsing:1 dag = â‚¬650 - Zonwering montage + elektra:0.5 dag = â‚¬400 - Afwerking stucwerk/schilderwerk:1 dag = â‚¬500 EXTRA KOSTEN:- Afvoer materiaal:â‚¬150 - Steigerkosten (indien nodig):â‚¬300 - Metselwerk herstel:â‚¬250 SUBTOTAAL:â‚¬15.250 BTW 21%:â‚¬3.203 TOTAAL:â‚¬18.453 KORTINGEN:- Totaalpakket korting:-â‚¬1.500 EINDTOTAAL:â‚¬16.953 EXTRA OPTIES:[ ] Horren bij alle ramen (+â‚¬750) [ ] Smart home integratie zonwering (+â‚¬200) [ ] Glasfolie UV-werend (+â‚¬300) [ ] Slimme deurbel met camera (+â‚¬250) VOORWAARDEN:- Aanbetaling:40% bij opdracht - Betaling:30% bij levering,30% na plaatsing - Levertijd:6-8 weken na opdracht - Garantie:15 jaar op kozijnen,10 jaar op glas,5 jaar op zonwering - Opname:Verplicht voor definitieve offerte - Keuring:KOMO-gekeurd en CE-gemarkeerd ENERGIEBESPARING:- Huidige situatie:HR glas (U-waarde 2.8) - Nieuwe situatie:HR+++ glas (U-waarde 0.6) - Besparing:Â±â‚¬450 per jaar op stookkosten - Terugverdientijd:Â±12 jaar - CO2 reductie:Â±800kg per jaar GENEREER VOLLEDIGE OFFERTE MET ALLE DETAILS.`} getSchuifpuiPrompt() {return `SCHUIFPUI OFFERTE - MODERNE WONING PROJECT TYPE:Schuifpui nieuwbouw/aanbouw WONINGTYPE:Moderne vrijstaande woning met aanbouw ORIÃ‹NTATIE:Zuidgevel (zonwerend glas vereist) SPECIFICATIES SCHUIFPUI:- Totale breedte:400cm (4000mm) - Hoogte:240cm (2400mm) - Type:4-delige lift & slide (2 vast,2 schuifbaar) - Materiaal:Aluminium thermisch onderbroken - Kleur:RAL 9005 Zwart (mat afwerking) - Profiel:Slanke profielen (design lijn) BEGLAZING:- Type:HR+++ triple glas met zonwerend coating - Dikte:44mm geÃ¯soleerd pakket - U-waarde:0.5 W/mÂ²K (triple glas) - G-waarde:0.35 (70% zonwering) - Geluidswerend:37dB - Veiligheid:Gelaagd glas binnenste SCHUIFSYSTEEM:- Type:Lift & Slide mechanisme (hydraulisch) - Schuifrichting:Links Ã©n rechts schuifbaar - Drempel:Verlaagde drempel (3mm) - rolstoelvriendelijk - Vergrendeling:Meerpuntssluiting (6 punten) - Beslag:RVS kleur zwart GEÃNTEGREERDE SCREENS:- Type:Inbouw insectenscreen (plissÃ©) - Bediening:Elektrisch met afstandsbediening - Kleur:Zwart mesh (transparant) - Positie:Boven in kozijn verwerkt WERKZAAMHEDEN:1. Inmeten bestaande opening (nauwkeurig Â±2mm) 2. Controle draagkracht bovenzijde (Â±400kg schuifpui) 3. Voorbewerking metselwerk/beton 4. Plaatsing onderdorpel (waterdicht) 5. Montage vast frame + isolatie 6. Plaatsing schuifelementen 7. Afstelling lift & slide mechanisme 8. Montage screens in kozijn 9. Elektrische aansluiting screens (230V) 10. Afkitten binnen/buiten (2-componenten) 11. Instructie bediening en onderhoud PRIJSOPBOUW:HOOFDCOMPONENTEN:- Aluminium schuifpui 4-delig 400x240cm:â‚¬8.500 - Zonwerend HR+++ triple glas 9.6mÂ²:â‚¬3.200 - Lift & slide mechanisme premium:â‚¬1.200 - Verlaagde drempel + waterafvoer:â‚¬450 - GeÃ¯ntegreerde screens elektrisch (2x):â‚¬1.400 MONTAGE & AFWERKING:- Transport en hijswerk (400kg):â‚¬350 - Plaatsing door 2 monteurs (2 dagen):â‚¬1.600 - Elektrische aansluiting screens:â‚¬200 - Afkitten professioneel 2-comp:â‚¬300 - Afwerking en eindschoonmaak:â‚¬150 VOORBEREIDINGSWERK:- Extra metselwerk aanpassing:â‚¬400 - Isolatie rondom kozijn:â‚¬200 - Lateien/staalwerk controle:â‚¬150 SUBTOTAAL:â‚¬18.100 BTW 9% (nieuwbouw):â‚¬1.629 TOTAAL:â‚¬19.729 EXTRA OPTIES:[ ] Smart Home integratie (Somfy):â‚¬350 [ ] Additionele buitenzonwering elektrisch:â‚¬2.800 [ ] Anti-inbraakbeslag RC3:â‚¬650 [ ] Extra glas coating (zelfreinigend):â‚¬400 TECHNISCHE SPECIFICATIES:- Inbraakwerendheid:RC2 (standaard) - Windbelasting:Klasse 4 (tot 140 km/u) - Waterdichtheid:Klasse 9A (hoogste) - Luchtdoorlatendheid:Klasse 4 - Certificering:KOMO,CE,SKH - Garantie:15 jaar op profielen,10 jaar op mechanisme PLANNING:- Productietijd:8-10 weken - Plaatsing:2 werkdagen - Best season:Voorjaar/zomer (droog weer vereist) - Oplevering:Inclusief afleverprotocol ONDERHOUD:- Smerenl mechanisme:1x per jaar - Reinigen rails:2x per jaar - Controle kit/afdichting:1x per 2 jaar - Onderhoudscontract optioneel:â‚¬150/jaar ENERGIEPRESTATIE:- U-waarde totaal kozijn:0.8 W/mÂ²K - G-waarde zonwerend:0.35 (65% warmte tegen) - Energielabel contribution:A+++ - Gemiddelde besparing:â‚¬200/jaar vs standaard glas GENEREER COMPLETE OFFERTE MET TECHNISCHE TEKENINGEN EN 3D VISUALISATIE.`} getDakramenPrompt() {return `DAKKAPEL RAMEN OFFERTE PROJECT:Ramen plaatsing in bestaande dakkapel WONINGTYPE:Eengezinswoning met dakkapel LOCATIE:Dakkapel achterzijde (aanname) SITUATIE:- Dakkapel:Bestaand,afgemeten - Breedte dakkapel:350cm totaal - Hoogte opening:Standaard Â±120-140cm (nader op te meten) - Huidige staat:Kaal/niet afgewerkt binnenwerk RAAM CONFIGURATIE:- Aantal ramen:3 stuks (naast elkaar) - Verdeling:Gelijke maat per raam - Berekende maat per raam:Â±110 x 120cm (onder voorbehoud inmeten) - Type:Draai-kiepraam (standaard woning) - Opening:Naar binnen draaiend - Ventilatie:Kiepraam functie voor ventilatie MATERIAAL & GLAS:- Kozijnmateriaal:Kunststof 5-kamer profiel - Kleur:Wit (RAL 9016) - Beglazing:HR++ dubbel glas (U-waarde 1.2) - Glassoort:Gelaagd veiligheidsglas (dakkapel vereist) - Geluidswerend:30dB (standaard) EXTRA WENSEN:- Gordijnrails:Inbouw rails in bovenkozijn (3x) - Type rails:Aluminium 2-baans systeem - Kleur rails:Wit (passend bij kozijn) WERKZAAMHEDEN TOTAAL:1. Opname ter plaatse (verplicht bij dakkapel) 2. Maatwerk inmeten (nauwkeurig per mm) 3. Voorbereiding dakkapel binnenzijde 4. Aanpassing/afwerking metselwerk 5. Plaatsing 3 kunststof kozijnen 6. Plaatsing 3 draaikiepramen met HR++ glas 7. Montage gordijnrails in kozijn (3x) 8. Afkitten en afdichten binnen/buiten 9. Schilderwerk binnenzijde (indien gewenst) 10. Stucwerk/gipsplaat afwerking rondom 11. Eindcontrole en oplevering PRIJSOPBOUW DETAIL:MATERIAALKOSTEN:- Kunststof kozijn + draaikiepraam 110x120cm HR++ (3x):â‚¬500/stuk = â‚¬1.500 - Veiligheidsglas upgrade (dakkapel eis):â‚¬150 - Inbouw gordijnrails aluminium 2-baans (3x):â‚¬80/stuk = â‚¬240 - Toebehoren (scharnieren,grepen,etc.):â‚¬120 - Kit- en afdichtmateriaal:â‚¬60 ARBEIDSKOSTEN:- Opname/inmeten dakkapel:â‚¬100 - Plaatsing 3 ramen door 2 monteurs:â‚¬900 (1 dag) - Montage gordijnrails:â‚¬150 - Binnenwerkafwerking (stuken):â‚¬400 - Afkitten professioneel:â‚¬200 BIJKOMENDE KOSTEN:- Steigerwerk/ladderstelling:â‚¬200 - Afvoer verpakkingsmateriaal:â‚¬40 - Reiskosten (standaard):â‚¬50 SUBTOTAAL:â‚¬4.110 BTW 21%:â‚¬863 TOTAAL:â‚¬4.973 OPTIONELE TOEVOEGINGEN:[ ] Binnenschilderwerk kozijnen:â‚¬350 [ ] Elektrische zonwering (3x):â‚¬1.200 [ ] Ventilatieroosters geluiddempend:â‚¬180 [ ] Horren (3x):â‚¬300 GARANTIE & SERVICE:- Kozijn en beglazing:10 jaar - Montage/plaatsing:5 jaar - Gordijnrails:2 jaar - Jaarlijkse controle:Aanbevolen PLANNING:- Opmeting:Binnen 1 week na akkoord - Levertijd:4-6 weken na inmeten - Plaatsing:1 werkdag - Weer afhankelijk:Ja (droog weer nodig) VOORWAARDEN:- Definitieve prijs na opmeting (maatwerk) - Aanbetaling:40% bij opdracht - Restbetaling:Na oplevering - Geldig:30 dagen VENTILATIE ADVIES:- Dakkapel vaak warmer (oplopende warmte) - Kiepramen zorgen voor goede ventilatie - Advies:Regelmatig ventileren via kiepraam - Overweeg:Mechanische ventilatie in dakkapel LET OP - DAKKAPEL SPECIFIEK:âš ï¸ Opmeting is verplicht (geen standaardmaten) âš ï¸ Veiligheidsglas is voorgeschreven âš ï¸ Extra aandacht voor waterdichtheid bovenzijde âš ï¸ Steigerwerk mogelijk nodig (afhankelijk hoogte) GENEREER OFFERTE + INCLUSIEF OPMETING AFSPRAAK VOORSTEL.`} getNieuwbouwPrompt() {return `COMPLETE NIEUWBOUW PAKKET - VRIJSTAANDE VILLA PROJECT TYPE:Totaallevering ramen + deuren nieuwbouw WONINGTYPE:Vrijstaande villa moderne architectuur WOONOPPERVLAK:Â±180mÂ² BOUWNUMMER:[in te vullen] TOTALE INVENTARIS:â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ðŸ“ RAMEN (20 stuks totaal):BEGANE GROND (8 ramen):- Woonkamer:3x raam 150x200cm (draaikiepraam) - Keuken:2x raam 100x120cm (kiepraam) - Bijkeuken:1x raam 80x80cm (vast glas) - Toilet:1x raam 60x60cm (matglas,kiepraam) - Hal:1x raam 60x150cm (vast glas,matglas) VERDIEPING (12 ramen):- Master bedroom:2x raam 120x150cm (draaikiepraam) - Slaapkamer 2:2x raam 100x120cm (draaikiepraam) - Slaapkamer 3:2x raam 100x120cm (draaikiepraam) - Slaapkamer 4:2x raam 80x120cm (draaikiepraam) - Badkamer:2x raam 80x80cm (matglas,kiepraam) - Overloop:2x raam 60x120cm (vast glas) ðŸšª DEUREN (3 stuks totaal):VOORDEUR:- Afmeting:100x230cm - Type:Veiligheidsdeur RC3 (inbraakwerend) - Materiaal:Aluminium + geÃ¯soleerde kern - Kleur:RAL 7016 antraciet grijs - Beglazing:Gedeeltelijk mat glas design - Beslag:RVS zwart (greep + rozet) - Slot:5-punts cilinder SKG*** - Extra:Video deurbel Ring/Nest (bekabeld) - Extra:LED verlichting geÃ¯ntegreerd - Extra:Electronisch slot (optioneel) ACHTERDEUR:- Afmeting:90x220cm - Type:Tuindeuren buitendraaiend - Materiaal:Aluminium + isolatie - Kleur:RAL 7016 antraciet grijs - Beglazing:Volledig glas HR+++ - Beslag:RVS zwart - Slot:3-punts sluiting SCHUIFPUI:- Afmeting:300x240cm (3-delig) - Type:Lift & Slide schuifsysteem - Materiaal:Aluminium smal profiel - Kleur:RAL 7016 antraciet grijs - Beglazing:HR+++ triple glas zonwerend - Drempel:Verlaagd (5mm max) ðŸ›¡ï¸ SPECIFICATIES ALGEMEEN:KOZIJNMATERIAAL:- Type:Aluminium thermisch onderbroken - Profiel:70mm diepte (premium isolatie) - Kleur:RAL 7016 antraciet grijs mat - Afwerking:Poedercoating UV-bestendig - Kwaliteit:Klasse 1 (hoogste kwaliteit) BEGLAZING ALLE RAMEN:- Standaard:HR+++ triple glas - U-waarde:0.5 W/mÂ²K (excellent) - Dikte:40mm isolatiepakket - Coating:Low-E (warmtereflecterend) - Afstandhouder:Warm-edge kunststof - Geluidswerend:35dB gemiddeld INBRAAKWERENDHEID:- Classificatie:RC2 standaard,RC3 deuren - Hang- en sluitwerk:SKG** gecertificeerd - Veiligheidsglas:Gelaagd P4A binnenste - Slot cilinders:SKG*** (3 sterren) - Beslag:Anti-uitlift scharnieren ðŸ”Œ ELEKTRISCHE OPTIES:ZONWERING/SCREENS (8 stuks):- Locatie:Alle grote ramen begane grond - Type:Inbouw screens elektrisch - Bediening:Somfy motor + RTS - Doek:Zwart transparant 5% (zonwerend + zicht) - Integratie:Smart home ready (Somfy TaHoma) VIDEO DEURBEL:- Type:Ring Video Doorbell Pro 2 - Features:1536p video,150Â° viewing angle - Bekabeling:Bedrade versie (24V) - Chime:Inclusief binnen â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ðŸ’° PRIJSOPBOUW VOLLEDIG PROJECT:MATERIAALKOSTEN:Ramen:- 8x grote ramen (>2mÂ²):â‚¬850/stuk = â‚¬6.800 - 12x standaard ramen:â‚¬650/stuk = â‚¬7.800 - Subtotaal ramen:â‚¬14.600 Deuren:- Voordeur RC3 + extra's:â‚¬4.500 - Achterdeur:â‚¬2.200 - Schuifpui 3-delig:â‚¬7.500 - Subtotaal deuren:â‚¬14.200 Zonwering:- 8x elektrische screens Somfy:â‚¬550/stuk = â‚¬4.400 Extra:- Video deurbel systeem:â‚¬350 - Smart home gateway:â‚¬200 - Toebehoren/beslag totaal:â‚¬800 TOTAAL MATERIAAL:â‚¬34.550 ARBEIDSKOSTEN:Installatie:- Plaatsing 20 ramen (4 dagen,2 monteurs):â‚¬3.200 - Plaatsing 3 deuren (1.5 dag):â‚¬1.200 - Afstelling schuifpui:â‚¬400 - Montage 8 screens + elektra:â‚¬1.600 - Installatie deurbel + bekabeling:â‚¬300 - Afkitten professioneel (totaal):â‚¬1.200 Planning & CoÃ¶rdinatie:- Projectleiding (opnames,afstemming):â‚¬800 - Nazorg en service (2x controle):â‚¬300 TOTAAL ARBEID:â‚¬9.000 BIJKOMEND:- Transport (20 ramen + 3 deuren):â‚¬600 - Steigerwerk/hijswerk:â‚¬800 - Afvoer verpakkingsmateriaal:â‚¬150 - Verzekering transport:â‚¬100 TOTAAL BIJKOMEND:â‚¬1.650 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBTOTAAL PROJECT:â‚¬45.200 BTW 9% (nieuwbouw):â‚¬4.068 TOTAAL INCLUSIEF:â‚¬49.268 NIEUWBOUW PAKKET KORTING:-â‚¬3.500 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” EINDPRIJS:â‚¬45.768 EXTRA OPTIES (niet inbegrepen):[ ] Buitenzonwering elektrisch (8x):â‚¬5.600 [ ] Upgrade naar RC3 alle ramen:â‚¬2.400 [ ] Zelfreinigend glas coating:â‚¬1.200 [ ] Extra ventilatieroosters CO2-gestuurd:â‚¬800 [ ] Uitgebreid smart home pakket:â‚¬1.500 [ ] Fingerprint toegang voordeur:â‚¬650 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ðŸ“‹ PLANNING & LEVERTIJD:FASE 1:Offerte & Definitieve Tekeningen (2 weken) - Bouwtekeningen analyseren - Definitieve maatvoering bevestigen - Kleurstalen opvragen - Contract ondertekenen FASE 2:Productie (10-12 weken) - Kozijnen productie:8 weken - Deuren productie:10 weken - Beglazing:3 weken - Screens:4 weken FASE 3:Levering & Montage (2 weken) - Week 1:Levering + montage ramen - Week 2:Montage deuren + screens - Eindoplevering + instructie TOTALE DOORLOOPTIJD:14-16 weken vanaf opdracht â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ðŸŽ¯ ENERGIEPRESTATIE:Huidige EPC-waarde (zonder ramen):~0.8 Met dit pakket:~0.4 (Nul-op-de-meter-ready) JAARLIJKSE ENERGIEBESPARING:- Verwarming:â‚¬800/jaar - Koeling (zomers):â‚¬200/jaar - Totaal:â‚¬1.000/jaar vs standaard glas CO2 REDUCTIE:1.500kg per jaar SUBSIDIES (controleren actueel):- ISDE subsidie mogelijk - Gemeentelijke duurzaamheidslening â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ðŸ› ï¸ GARANTIE & SERVICE:GARANTIETERMIJNEN:- Kozijnen aluminium:20 jaar - Beglazing:15 jaar - Hang- en sluitwerk:10 jaar - Screens/motoren:5 jaar - Montage:5 jaar SERVICE OPTIES:- Jaarlijks onderhoudscontract:â‚¬250/jaar - 24/7 storingsdienst beschikbaar - Gratis nazorg:2x controle 1e jaar â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ðŸ“œ CERTIFICERINGEN:âœ“ KOMO Kwaliteitsverklaring âœ“ CE Markering conform NEN-EN âœ“ SKG** / *** Hang- en sluitwerk âœ“ RC2/RC3 Inbraakwerendheid âœ“ Komo betonverf coating (kozijn) âœ“ NEN 3569 Draagconstructie berekeningen â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ðŸ’³ BETALINGSCONDITIE:- Bij opdracht:30% (â‚¬13.730) - Bij levering:40% (â‚¬18.307) - Na oplevering:30% (â‚¬13.731) Totaal:â‚¬45.768 GELDIGHEID:60 dagen AANBETALING BLOKKEERT:Materialen en productie â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” GENEREER COMPLETE OFFERTE MET:- Visuele plattegrond met raam/deur nummering - 3D renders voordeur + schuifpui - Kleurstalen digitaal - Planning Gantt chart - Energie-calculatie detail`} } document.addEventListener('DOMContentLoaded',() => {window.yannovaQuoteProcessor = new YannovaQuoteProcessor()});if (typeof module !== 'undefined' && module.exports) {module.exports = YannovaQuoteProcessor} class EnhancedFormValidator {constructor() {this.forms = document.querySelectorAll('form');this.init()} init() {this.forms.forEach(form => {this.setupForm(form)})} setupForm(form) {this.addValidationListeners(form);this.addAccessibilityFeatures(form);this.setupFormSubmission(form)} addValidationListeners(form) {const fields = form.querySelectorAll('input,textarea,select');fields.forEach(field => {field.addEventListener('blur',() => {this.validateField(field)});field.addEventListener('input',() => {this.clearFieldError(field)});if (field.type === 'email') {field.addEventListener('input',(e) => {this.validateEmailFormat(e.target)})} })} addAccessibilityFeatures(form) {const requiredFields = form.querySelectorAll('[required]');requiredFields.forEach(field => {field.setAttribute('aria-required','true');const label = form.querySelector(`label[for="${field.id}"]`);if (label && !label.textContent.includes('*')) {label.innerHTML += ' <span class="required-indicator" aria-label="verplicht veld">*</span>'} });this.addFieldDescriptions(form)} addFieldDescriptions(form) {const descriptions = {'naam':'Voer uw volledige naam in','email':'Voer een geldig emailadres in (bijvoorbeeld:naam@voorbeeld.nl)','telefoon':'Voer uw telefoonnummer in (optioneel)','bericht':'Beschrijf uw vraag of project (minimaal 10 tekens)' };Object.entries(descriptions).forEach(([fieldId,description]) => {const field = form.querySelector(`#${fieldId}`);if (field) {const descId = `${fieldId}-description`;field.setAttribute('aria-describedby',descId);const descElement = document.createElement('div');descElement.id = descId;descElement.className = 'field-description';descElement.textContent = description;descElement.style.cssText = 'font-size:0.9rem;color:#ccc;margin-top:0.25rem;';field.parentNode.appendChild(descElement)} })} validateField(field) {const value = field.value.trim();const fieldName = field.id || field.name;const isRequired = field.hasAttribute('required');this.clearFieldError(field);if (isRequired && !value) {this.showFieldError(field,`${this.getFieldLabel(fieldName)} is verplicht`);return false} if (!value && !isRequired) {return true} switch (field.type) {case 'email':if (!this.isValidEmail(value)) {this.showFieldError(field,'Voer een geldig emailadres in');return false} break;case 'tel':if (!this.isValidPhone(value)) {this.showFieldError(field,'Voer een geldig telefoonnummer in');return false} break} switch (fieldName) {case 'bericht':if (value.length < 10) {this.showFieldError(field,'Bericht moet minimaal 10 tekens bevatten');return false} if (value.length > 1000) {this.showFieldError(field,'Bericht mag maximaal 1000 tekens bevatten');return false} break;case 'naam':if (value.length < 2) {this.showFieldError(field,'Naam moet minimaal 2 tekens bevatten');return false} if (!/^[a-zA-Z\s\u00c0-\u017f]+$/.test(value)) {this.showFieldError(field,'Naam mag alleen letters en spaties bevatten');return false} break} return true} validateEmailFormat(field) {const value = field.value.trim();if (value && !this.isValidEmail(value)) {this.showFieldError(field,'Voer een geldig emailadres in')} else {this.clearFieldError(field)} } isValidEmail(email) {const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;return emailRegex.test(email)} isValidPhone(phone) {const phoneRegex = /^(\+31|0)[1-9][0-9]{8}$/;return phoneRegex.test(phone.replace(/\s/g,''))} getFieldLabel(fieldName) {const labels = {naam:'Naam',email:'Email',telefoon:'Telefoon',bericht:'Bericht',onderwerp:'Onderwerp' };return labels[fieldName] || fieldName} showFieldError(field,message) {this.clearFieldError(field);const errorDiv = document.createElement('div');errorDiv.className = 'field-error';errorDiv.textContent = message;errorDiv.setAttribute('role','alert');errorDiv.setAttribute('aria-live','polite');errorDiv.style.cssText = ` color:#ff6b6b;font-size:0.9rem;margin-top:0.25rem;display:flex;align-items:center;gap:0.5rem;`;const errorIcon = document.createElement('i');errorIcon.className = 'fas fa-exclamation-circle';errorIcon.setAttribute('aria-hidden','true');errorDiv.prepend(errorIcon);field.classList.add('error');field.setAttribute('aria-invalid','true');field.setAttribute('aria-describedby',`${field.id}-error`);errorDiv.id = `${field.id}-error`;field.parentNode.appendChild(errorDiv);field.focus()} clearFieldError(field) {const existingError = field.parentNode.querySelector('.field-error');if (existingError) {existingError.remove()} field.classList.remove('error');field.removeAttribute('aria-invalid');field.removeAttribute('aria-describedby')} setupFormSubmission(form) {form.addEventListener('submit',async (e) => {e.preventDefault();const fields = form.querySelectorAll('input,textarea,select');let isValid = true;fields.forEach(field => {if (!this.validateField(field)) {isValid = false} });if (!isValid) {this.showNotification('Vul alle verplichte velden correct in','error');return} this.setLoadingState(form,true);try {const formData = this.collectFormData(form);const response = await this.submitForm(formData);if (response.success) {this.showNotification('Bedankt voor uw aanvraag! We nemen zo snel mogelijk contact met u op.','success');form.reset();this.clearAllErrors(form)} else {throw new Error(response.message || 'Er ging iets fout bij het verzenden')} } catch (error) {console.error('Form submission error:',error);this.showNotification('Er ging iets fout bij het verzenden. Probeer het later opnieuw.','error')} finally {this.setLoadingState(form,false)} })} collectFormData(form) {const formData = {};const fields = form.querySelectorAll('input,textarea,select');fields.forEach(field => {if (field.name) {formData[field.name] = field.value.trim()} });return formData} async submitForm(formData) {return new Promise((resolve) => {setTimeout(() => {const isSuccess = Math.random() > 0.1;resolve({success:isSuccess,message:isSuccess ? 'Formulier succesvol verzonden' :'Server error' })},1500)})} setLoadingState(form,loading) {const submitBtn = form.querySelector('button[type="submit"]');if (submitBtn) {submitBtn.disabled = loading;if (loading) {submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Bezig met verzenden...';submitBtn.classList.add('loading')} else {submitBtn.innerHTML = 'Verstuur bericht';submitBtn.classList.remove('loading')} } const formFields = form.querySelectorAll('input,textarea,select,button');formFields.forEach(field => {if (field !== submitBtn) {field.disabled = loading} })} showNotification(message,type = 'info') {let container = document.querySelector('.notification-container');if (!container) {container = document.createElement('div');container.className = 'notification-container';container.style.cssText = ` position:fixed;top:20px;right:20px;z-index:10000;max-width:400px;`;document.body.appendChild(container)} const notification = document.createElement('div');notification.className = `notification notification-${type}`;notification.setAttribute('role','alert');notification.setAttribute('aria-live','polite');const typeIcons = {success:'fa-check-circle',error:'fa-exclamation-circle',info:'fa-info-circle',warning:'fa-exclamation-triangle' };const typeColors = {success:'#4caf50',error:'#f44336',info:'#2196f3',warning:'#ff9800' };notification.innerHTML = ` <div class="notification-content" style=" background:${typeColors[type]};color:white;padding:1rem;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.3);display:flex;align-items:center;gap:0.75rem;margin-bottom:0.5rem;animation:slideIn 0.3s ease;"> <i class="fas ${typeIcons[type]}" aria-hidden="true"></i> <span>${message}</span> <button class="notification-close" onclick="this.parentElement.parentElement.remove()" style=" background:none;border:none;color:white;cursor:pointer;margin-left:auto;padding:0.25rem;"> <i class="fas fa-times" aria-hidden="true"></i> </button> </div> `;if (!document.querySelector('#notification-styles')) {const style = document.createElement('style');style.id = 'notification-styles';style.textContent = ` @keyframes slideIn {from {transform:translateX(100%);opacity:0} to {transform:translateX(0);opacity:1} } .notification-close:hover {background:rgba(255,255,255,0.2) !important;border-radius:4px} `;document.head.appendChild(style)} container.appendChild(notification);setTimeout(() => {if (notification.parentNode) {notification.style.animation = 'slideIn 0.3s ease reverse';setTimeout(() => {if (notification.parentNode) {notification.remove()} },300)} },5000)} clearAllErrors(form) {const errorElements = form.querySelectorAll('.field-error');errorElements.forEach(error => error.remove());const errorFields = form.querySelectorAll('.error');errorFields.forEach(field => {field.classList.remove('error');field.removeAttribute('aria-invalid');field.removeAttribute('aria-describedby')})} } document.addEventListener('DOMContentLoaded',() => {window.enhancedFormValidator = new EnhancedFormValidator()});if (typeof module !== 'undefined' && module.exports) {module.exports = EnhancedFormValidator}